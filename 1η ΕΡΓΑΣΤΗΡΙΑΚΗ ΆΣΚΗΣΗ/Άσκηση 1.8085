;ΠΑΡΑΔΟΧΗ: επειδή η άσκηση δεν το διευκρινίζει εμείς θεωρήσαμε ότι όταν αλλάζει η είσοδος 
;ενώ <<τρέχει>> το πρόγραμμα θα ολοκληρώσει την προηγούμενη εκτέλεση και μετά θα ξεκινήσει
;την νέα διεργασία. Δηλαδή αν έχουμε δώσει σαν είσοδο την τιμή χ=8 και βρίκσεται στην σιγμή
;0,1,2,3,4,5,6 και αλλάξει η είσοδος και γίνει χ=4 τότε θα ολοκληρωθεί η προηγούμενη διεργασία 
;δηλαδή θα κάνει και τα βήματα 7,8,7,6,5,4,3,2,1,0 ΚΑΙ ΜΕΤΑ θα ξεκινήσει ή νέ λειτουργία
;δηλαδή η 1,2,3,4,3,2,1,0.
	
LXI B,03E8H             ;εισαγωγή της τιμής 1000=3E8 (1000ms=1sec) για την χρονοκαθυστέρηρη DELB
START:
	MVI A,00H        ;αρχικοποίηση του καταχωρητή Α με την τιμή 00  

	LDA 2000H        ;έλεχγος της εισόδου για να διαπιστώσουμε αν το LSB είναι OFF 
	RRC              ;ώστε να σταματήσει η λειτουργία
	JNC START        
	LDA 2000H        ;έλεγχος για την ειδική περίπτωση που οι διακόπτες των
	CPI 01H	   ;MSB είναι OFF. "αν δεν βάζαμε αυτό τον έλεγχο θα υπήρχε ένα  
	JZ ALL_OFF       ;ανεπιθύμητο αποτέλεσμα "

	LDA 2000H        ;ανάγνωση της εισόδου 
	RRC              ;και δεξιές ολισθήσεις(4) ώστε να μεταφέρουμε τα bits 
	RRC		   ;των MSB στα LSB ώστε να πάρουμε τον αριθμό της εισόδου ( δηλαδή το χ)
	RRC
	RRC

	ANI 0FH         ; αφού έχουμε την είσοδο στα LSB κάνουμε AND της εισόδου με
		         ;τον αριθμό 00001111 ώστε να μηδενιστούν τα MSB και να παρουμε την είσοδο

	MOV E,A         ;κρατάμε αντίγραφο του καταχωρητή Α γιατί επηρεάζεται η τιμή του   
	MVI C,00H       ;ο C έχει τον ρόλο του μετρητή ο οποίος εμφανίζεται στα LEDs
LOOP1:                 
	LDA 2000H       ;έλεγχος για το LSB αν είναι OFF ώστε να σταματήσει η λειτουργία
	RRC
	JNC LOOP1
	MOV A,C         
	CMA            ;η έξοδος έιναι αρνητικής λογικής
	STA 3000H      ;εμφάνιση του καταχωρητή C στην έξοδο των LEDs 
	CALL DELB      ;καλούμε την χρονοκαθυστέριση DELB ώστε να είναι εμφανείς οι ενδείξεις των LEDs
	INR C          ;αυξάνουμε την τιμή του C ώστε να εμφανίσει τον επόμενο αριθμό
	MOV A,C        ;ελέγχουμε αν ο C έφτασε στην άνω τιμή η οποία έχει αποθηκευτεί 
	CMP E          ;στον καταχωρητή Ε
	JNZ LOOP1      ;αν όχι επιστρέφει ώστε να αυξηθεί ο C και να εμφανιστεί
LOOP2:                ;αλλιώς πήγαινε και μέτρα προς τα πίσω 

	LDA 2000H      ;έλεγχος για το LSB αν είναι OFF ώστε να σταματήσει η λειτουργία
 	RRC
	JNC LOOP2
	MOV A,C        
	CMA		 ;η έξοδος έιναι αρνητικής λογικής
	STA 3000H      ;εμφάνιση του καταχωρητή C στην έξοδο των LEDs 
	CALL DELB      ;καλούμε την χρονοκαθυστέριση DELB ώστε να είναι εμφανείς οι ενδείξεις των LEDs
	DCR C          ;μειώνουμε την τιμή του καταχωρητή C αφού είμαστε στην περίπτωση
			 ;που μετράμε προς τα πίσω
	JNZ LOOP2      ;έλεγχος για το αν έφτασε στο 0 ώστε να ξαναμετρήσει προς τα πάνω
	JMP START      ;αν έφτασε στο 0 πήγαινε ξανά στην αρχή 

ALL_OFF:             ;εμφάνιση στην έξοδο των LEDs την τιμή 0 
MVI A,00H
CMA
STA 3000H
JMP START
END
